<!DOCTYPE html>
<html lang="es">
<head>
  <!-- =========================================
    BLOQUE: Inclusión de librerías y estilos
    Explicación: Carga Chart.js para gráficas, estilos modernos y el favicon de la marca.
  ========================================= -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module" src="../js/analytics-charts.js" defer></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-K88FPQS90X"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-K88FPQS90X');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel de Administración</title>
  <link rel="icon" type="image/png" href="../fotos/favicon.ico">
  <link rel="stylesheet" href="../css/admin-glass.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
  <div class="dashboard-container">
    <aside class="sidebar" id="sidebar">
      <div class="logo">
        <img src="../fotos/nuevo-logo-Rm-300x195.png" alt="Renacer Mascotas">
      </div>
      <nav class="sidebar-nav">
        <ul>
          <li><a href="#" class="tab-btn active" data-tab="analytics"><i class="fa-solid fa-chart-line"></i> Analítica</a></li>
          <li><a href="#" class="tab-btn" data-tab="blog"><i class="fa-solid fa-newspaper"></i> Blog</a></li>
          <li><a href="#" class_="tab-btn" data-tab="testimonios"><i class="fa-solid fa-quote-left"></i> Testimonios</a></li>
          <li><a href="#" class="tab-btn" data-tab="galeria"><i class="fa-solid fa-images"></i> Galería</a></li>
        </ul>
      </nav>
    </aside>
    <main class="main-content">
      <header class="dashboard-header">
        <div>
          <h1>Panel de Administración</h1>
          <p>Bienvenido al centro de control de Renacer Mascotas.</p>
        </div>
        <div class="user-profile">
          <i class="fa-solid fa-right-from-bracket" id="logout-btn"></i>
        </div>
      </header>
      <div class="widgets-grid">
        <section id="tab-analytics" class="widget tab-section active">
          <h3><i class="fa-solid fa-chart-line"></i> Analítica Web</h3>
          <div id="analytics-summary" class="analytics-summary">
            <div class="widget">
              <div class="summary-icon"><i class="fa-solid fa-users"></i></div>
              <div class="summary-title">Visitas</div>
              <div id="analytics-visits" class="summary-value">-</div>
            </div>
            <div class="widget">
              <div class="summary-icon"><i class="fa-solid fa-clock"></i></div>
              <div class="summary-title">Tiempo promedio</div>
              <div id="analytics-avgtime" class="summary-value">-</div>
            </div>
            <div class="widget">
              <div class="summary-icon"><i class="fa-solid fa-globe"></i></div>
              <div class="summary-title">Zona más activa</div>
              <div id="analytics-topzone" class="summary-value">-</div>
            </div>
          </div>
          <div class="charts-grid">
            <div class="widget large-brain">
              <h4><i class="fa-solid fa-chart-area"></i> Visitas por día</h4>
              <canvas id="analytics-visits-chart" height="120"></canvas>
            </div>
            <div class="widget">
              <h4><i class="fa-solid fa-earth-americas"></i> Distribución por país</h4>
              <canvas id="analytics-countries-chart" height="120"></canvas>
            </div>
          </div>
          <div class="analytics-disclaimer">* Los datos se actualizan automáticamente desde Google Analytics.</div>
        </section>
        <section id="tab-blog" class="widget tab-section"></section>
        <section id="tab-testimonios" class="widget tab-section"></section>
        <section id="tab-galeria" class="widget tab-section"></section>
      </div>
    </main>
  </div>
  <script type="module" src="../js/admin-dashboard.js"></script>
  <script>
    // Menú lateral colapsable responsive
    const sidebar = document.getElementById('sidebar');
    const toggleBtn = document.getElementById('sidebar-toggle');
    if (toggleBtn) {
      toggleBtn.addEventListener('click', function() {
        sidebar.classList.toggle('sidebar-open');
      });
    }
    // Cerrar menú al hacer clic fuera en móvil
    window.addEventListener('click', function(e) {
      if (window.innerWidth <= 900 && sidebar.classList.contains('sidebar-open')) {
        if (!sidebar.contains(e.target) && e.target !== toggleBtn) {
          sidebar.classList.remove('sidebar-open');
        }
      }
    });
  </script>
  <!-- Script para cargar el footer -->
  <script type="module">
      // Función simple para incluir HTML
      const includeHTML = (elementId, url) => {
          fetch(url)
              .then(response => response.ok ? response.text() : Promise.reject(response.statusText))
              .then(html => {
                  const element = document.getElementById(elementId);
                  if (element) element.innerHTML = html;
              })
              .catch(error => console.error(`Error incluyendo HTML desde ${url}:`, error));
      };

      // Cargar el footer
      includeHTML('footer', '../footer.html');
  </script>
</body>
</html>